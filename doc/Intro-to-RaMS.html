<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Intro to RaMS</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Intro to RaMS</h1>



<!-- This vignette is created from a .Rmd file: please edit that instead. -->
<p><strong>Table of contents:</strong></p>
<ul>
<li><strong><a href="#basic-rams-usage">Basic RaMS usage</a></strong>
<ul>
<li><a href="#tics-bpcs-and-metadata">TICs, BPCs, and metadata</a></li>
<li><a href="#adding-a-column-ms1-data">Adding a column: MS1
data</a></li>
<li><a href="#moving-along-ms2-data">Moving along: MS2 data</a></li>
<li><a href="#continuing-chromatograms">Continuing:
chromatograms!</a></li>
</ul></li>
<li><strong><a href="#advanced-rams-usage">Advanced RaMS
usage</a></strong>
<ul>
<li><a href="#saving-space-eics-and-rtrange">Saving space: EICs and
rtrange</a></li>
<li><a href="#speeding-things-up">Speeding things up</a></li>
<li><a href="#finer-control-grabmzmldata-grabmzxmldata">Finer control:
grabMzmlData, grabMzxmlData</a></li>
<li><a href="#the-nitty-gritty-details">The nitty-gritty
details</a></li>
</ul></li>
</ul>
<div id="basic-rams-usage" class="section level2">
<h2>Basic RaMS usage</h2>
<p>Welcome to <code>RaMS</code>! This vignette is designed to provide
examples using the package at various levels of complexity. Let’s jump
right in.</p>
<p>If you have your own data, feel free to load it here. If not, there’s
a couple small example files you’re welcome to use in the “extdata”
folder. The first of these contains DDA data from a pooled sample, while
the others are individual samples. I’ll be using these throughout. For
more details on the origin of these files, see the <a href="https://cran.r-project.org/web/packages/RaMS/vignettes/Minifying-files-with-RaMS.html">minification
vignette</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(RaMS)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># Locate the file directory</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>msdata_dir <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="at">package =</span> <span class="st">&quot;RaMS&quot;</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># Identify the files of interest</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>data_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(msdata_dir, <span class="at">pattern =</span> <span class="st">&quot;mzML&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co"># Check that the files identified are the ones expected</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="fu">basename</span>(data_files)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co">#&gt; [1] &quot;DDApos_2.mzML.gz&quot;  &quot;LB12HL_AB.mzML.gz&quot; &quot;LB12HL_CD.mzML.gz&quot;</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co">#&gt; [4] &quot;LB12HL_EF.mzML.gz&quot;</span></span></code></pre></div>
<p>There’s only one function to worry about in <code>RaMS</code>: the
aptly named <code>grabMSdata</code>. This function has a couple
arguments with sensible defaults, but you’ll always need to tell it two
things: one, which files you’d like to process; and two, the data you’d
like to obtain from those files.</p>
<p>Let’s start simple, with a single file and the most basic information
about it.</p>
<div id="tics-bpcs-and-metadata" class="section level3">
<h3>TICs, BPCs, and metadata</h3>
<p>A TIC reports the total intensity measured by the mass analyzer
during each scan, so the data is parsed into two columns: retention time
(rt) and intensity (int). This makes it easy to read and simple to
plot:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>single_file <span class="ot">&lt;-</span> data_files[<span class="dv">2</span>]</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(single_file, <span class="at">grab_what =</span> <span class="st">&quot;TIC&quot;</span>)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#&gt; Reading file LB12HL_AB.mzML.gz... 0.05 secs </span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt; Reading TIC...0.11 secs </span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt; Binding files together into single data.table</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt; Total time: 0.16 secs</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(msdata<span class="sc">$</span>TIC, <span class="dv">3</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">rt</th>
<th align="right">int</th>
<th align="left">filename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4.009000</td>
<td align="right">24680889</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">4.024533</td>
<td align="right">22832946</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">4.040133</td>
<td align="right">23881353</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
</tbody>
</table>
<p>Since we asked for a single thing, the TIC, our
<code>file_data</code> object is a list with a single entry: the TIC.
Let’s plot that data:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">plot</span>(msdata<span class="sc">$</span>TIC<span class="sc">$</span>rt, msdata<span class="sc">$</span>TIC<span class="sc">$</span>int, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p>Simple enough!</p>
<p>A BPC is just like a TIC except that it records the <em>maximum</em>
intensity measured, rather than the sum of all intensities. This data is
also collected by the mass analyzer and doesn’t need to be
calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(single_file, <span class="at">grab_what =</span> <span class="st">&quot;BPC&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">#&gt; Reading file LB12HL_AB.mzML.gz... 0.05 secs </span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt; Reading BPC...0.07 secs </span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt; Binding files together into single data.table</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&gt; Total time: 0.12 secs</span></span></code></pre></div>
<p>Since the data is parsed in a <a href="https://r4ds.had.co.nz/tidy-data.html">“tidy” format</a>, it plays
nicely with popular packages such as <code>ggplot2</code>. Let’s use
that to plot our BPC instead of the base R plotting system:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">ggplot</span>(msdata<span class="sc">$</span>BPC) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>int))</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnAAAAEgCAMAAAADq777AAAAolBMVEUAAAAAAGYAZrYzMzM6AAA6ADo6AGY6kNtNTU1NTW5NTY5NbqtNjshmAABmtv9uTU1uTW5uTY5ubqtuq8huq+SOTU2OTW6OTY6ObquOyP+QOgCQkDqQ2/+rbk2rbm6rbo6rjk2ryKur5P+2ZgC22/+2///Ijk3I///bkDrkq27k///r6+v/tmb/yI7/25D/27b/5Kv//7b//8j//9v//+T///8F0jn8AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAOB0lEQVR4nO2dbWPbthWFsTTblLZJ2jRe521p2q5z5mrKHM/6/39tfBVfABCX0CUI0s/5YFFX8tGx+AgAaUnXnBFKKLN2APS8BHAoqQAOJRXAoaQCOJRUAIeSShe44yzNvDsWW7YAOCySWgAcFkktAA6LpBYAh0VSC4DDIqkFwGGR1ALgsEhqAXBYJLUAOCySWgAcFkktdgacud5CIQUWAJc0BRYAlzQFFlcC9/D9p+ry8ebwze/jG5viw9vD158ADouAhQS4U4PS04fb8/23oxub4uNNcXGhUSdbhAXA5W4hAO7u1S/1CPf446dqsCvGtIrA8npbfHj3+/nxL78CHBbTFpIRrp1SW6ju3tcDXQVcU+yA+6rQlNmi4o3LW5EEuNM3FVQlVwVrp0Op922xnFJfMcJhEbCYA1wzihUz6uFQstUf4cqDhh9+AjgsAhZzgGuWaxVn7fXLwq69DnBYTFnMAe7pQ714K9Zwp8sBaVMsB7nuCFYnW4SFiWcu7/20GwsxcM3haQlacXFZrV3OwxVLuu4cnU62CAuAy91CBNxs6WSLsAC43C12CFwkcXnvp91YANwCKbAAuKQpsAC4pCmwALikKbAAuKQpsAC4pCmwALikKbB4PsAZgMvbAuAWSIHFMwLOxP5vK+/9tBsLgFsgBRbPDLgo5PLeT7uxALgFUmABcElTYAFwSVNgAXBJU2ABcElTYAFwSVNgkRq41VQAV/5YOwYKagcjXDmulSNc/SPKQiEFFtMWAKecAotpC4BTToHFtMWugDMAl73F7oBrNuIsFFJgMW0BcMopsJi22BdwNWoAl7EFwCmnwGLaYm/AHY8Al7XFvoCrr8R9hVLe+2k3FgCnnAKLaYv9AGf6p98ALlcLgNNNgUXAAuB0U2ARsNgRcEeA24DFroDrrgNcrhY7BS6CuLz3024sAE43BRYBC4DTTWFrXpK8aVGwADjdFLbmvTkvb1oULABON4UtgBvWAU41xVhzv80pb1oULMLA3Vd9UW/bza6xfaNcet4P9yvAZWoRBq5U0zzw7ta+qe15X3YTXLPnvQG4TViIgGua2T81DXi9Pe/X7JcKcNuwEAHXNEKtWkHfnp0977sRbqWe96OP2+fy4XuTT5S8NPWsNAPc+eG7X8tRztnzvl3K1dJ5McyyyHWEmxkl7+FJwUICXNf++Vyu45w970sYT18zpY4FcOO6ALhiCh0A5+p53w50AGfHmJMlb1oULATAtccK1Uj39PGTs+f9+iPcsABwmVoIgKsHrrLn/X0zlXp63ndFnWyzLABuGxYC4CKkk22WBcBtwwLgVFOMBXBWHeA0U4wFcFYd4DRTjAVwVh3gNFOMBXBWHeA0U4xlej/XS5GTxV6Bm08cwCWxADjVFGMBnFXfCXDWPgW4PC0ATjOFVQE4qw5wiimsCsBZdYBTTGFVAM6qA5xiCqsCcFYd4BRTWBWAs+oAp5jCqgCcVd8rcLOJA7gkFgCnmcITAuB6dYBTTOEJAXC9OsAppvCEALheHeAUU3hCAFyvvghw6WXnz+IvMr2fqC9GOEa4JBYAp5nCEwLgenWAU0zhCQFwvTrAKabwhAC4Xh3gFFN4MgBcrw5wiik8GQCuVwc4xRSeDADXqwOcYgpPBoDr1QFOMYUnA8D16gCnmMKTAeB6dYBTTOHJAHC9OsAppvBkALheHeAUU3gyAFyvvg/gHLsU4LK0ADjFFAAXtnAB9+X1m/LiP3/4F8BdZwFwdh3g9FIAXNjCBu7fptWLWN4AbpRBniVvWhQsbOAuI9wV0sk2QwC3FQsXcNdLJ9sMAdxWLJzAfX5ZTanbXsPNJQ7gkli4gPvf3+JXbwDnSgBwXd0B3GgN13W6H/REbZVFz3uA24qFe4QbAHfpdN+0tx8qj573ALcVCxdwwzNwl+6VbWvUDHveG5cFwOVo4QLuy2vTO2hoO91fmj9n2PPeeYy9/ufdjbWBWvmfkqbT/blu0NuwlVnPe0a4zViEgatUrePawSy/nvcAtxkLC7jiEHU4pXbANcu1DHveA9xmLMIjXNvp/tLePsOe9wC3GQvBlFp3um8OT0vQ8ut57wRuJnEAl8RCAFyEdLLJBXCbsQA4vRQAJ7AAOL0UACewADi9FAAnsAA4vRQAJ7AAOL0UACewADi9FH7g5FHypkXBAuD0UgCcwALg9FIAnMAC4PRSAJzAAuD0UgCcwALg9FIAnMAC4PRSAJzAAuD0UgCcwALg9FIAnMAC4PRSAJzAAuD0UgCcwALg9FIAnMAC4PRSAJzAAuD0UgCcwALg9FIAnMBiGeBSy51+9b/JOLZQLUY4RrgkFgCnlwLgBBYAp5dibGGcm6lTZGYBcHopAE5gsQvgjNsC4DK0ADi1FAAnsQA4tRQAJ7HYM3DziAO4JBYAp5YC4CQWAKeWAuAkFgCnlgLgJBYAp5YC4CQWAKeWAuAkFgCnlgLgJBa7Bm4WcQCXxGIPwBmvBcBlZwFwWilsC4Bz1QFOKYVtAXCuOsAppbAtAM5VBzilFLYFwLnqAKeUwrYAOFcd4JRS2BYA56qHgXt423SELtu8HS4dA1s1zd2Ke3U36WSTKlPgjGc7bYrcLMLAlV1Qy+aU56Zr6khPH27L9pVdC3KAczw4wF3qQeBO37ao1Y3IqzGtGsz6DXqrxtA/rtMvdQPAiZPkTYuCRRi4dpSrQKsm17u6T++gBXk3wn1VaNJMXf7sq37g3XivoMATUnZ9LlROrMUoV7JVsHY6lHrf9h5vlnK1dF4MUjHCbchCAtzjzfvuyt1tNdCV3Z/7I9yaLcgBbvAgmwfu4W3/WKEArl2q9ddw7UAHcO4HB7i2HgSu462E6unjp3INd7pMn+V0W6zoGOEsi9TAmaMxV1oopAhZhIG7r9Zqt8UoVm5WU+lNddGoWbydDr2iTjapAK5+CHPcBXAx0skm1WLAzfskNcBJLADOn6Ldg5EWKwBXPQzAxWaTajHgmkVRpAXAOesA50thtgbcEeCuyybVMsBV8ynAaVsAnC+FmWuwMnCm/QlwsdmkArjuEQDuimxSAVz3CAB3RTahptYtM4ABOI0UQQuA86QwvZ9xFmmBM5dLgIvNJtSSwM0jDuDCFgDnSaEMnNQI4J4pcGZ0eYXFLCOAA7hrLWYZAdzzBM44tmZarAScpyvPPAHclABu4A9w0dmEmvz/oZwXgFNIEbYAOGcKgFvKYvvATb/LNQ4449ycZZEYuN4rBOBis8kEcEP7ZwlcSk0nj/u7jHMz3uQqn7kPto1dyQi3lxFu5v9/VVMILPYOnPzp1wZu9IsA19QBzpHCeLZnWFi/J/OJfC4iAyunkFgAnCvFpoE7X08cwE0I4I4Ap5NNJoA7ApxONpmCwM1frkcdX45TAJy7DnB2iq0DdzVxADehAHDiT88D3NUpJBYAZ6eIO4M2TpESuIH3+foTIwA3oRBw86fUzQN3NXEA55cJWqgD5x0zfQe60zHGtEQI4FSyiaQPXGhoMl7LKOCGRzUAtwfgRM+/F7jxMYQucCO3qOdiaH32P5hUAOdXCuDs88Bux0jg+jcBXObAGYGF7DjVD5zjHw9qwJnRTQD37IBz3NlYmxHAuX9nzK8ScFcSB3BeSYCTPf0TwPWQNRP3igDO4jfmuRgZn72PJhbA+dQ+rSEL/0J/nMIz85nxUOS6H8CFLZ4NcMF5dRK46shjcPQxH7iJ0lXAjW3bP+QK5ADOJzFwJsjcNHDH8Zeau8yigetu0gPumjEO4HySAlfdtybGGGsvtxbGzBkWTC3P8CQCzloa6gIXPcjNTRF48Q3qYeC6TqiDnqijm2f2S+3PJdOHmJPz2Bzgjs0+qAc7p2QuI0+ny8QhqfO6bXLBuTUdBTTGMqnVP78zfkkIZT2dAQdV4Jqm9oMt++bhbf5kETo6N4eEyF+S1YnW0AIsUuf64MTPrpm41ktxWS42G+bySnEh6bToP4r39RW1D4SKB65piNrbcvW87+4lG+EmnqEYbcVitBtXSrGmRRi4puVzb8vV8767V/qe92iD8gPX9Xputpw979fsCI3FhizCwFkjnLvn/TuAw0JgEQbOWsM5e96zhsNCZBEGrmlq39ty9bzv7gVwWExYhIFrzrA1h6fNKTe75/3M83CSbFjs0EIAXIR0smGxQwuAwyKpBcBhkdQC4LBIarEMcMmVx/82SNEplALgFESKTgCXQKToBHAJRIpOOwcObU0Ah5IK4FBSARxKKoBDSbVl4J4+9N+9spYe3taf9Fg3RPmWxCLJ4Xb1FPeHw9QTsmXg7m57789bS483t+f7tVOcyl1cvvH64bsVX4FVinKvTGnDwF3egbyqhu+xX0d3r34pxpZT+T7YwO5ePsXTT9PPxYaBe3j3cwZTag7AnS/v8l83SfNm3cmJfcvAvb2tdve6qqbU1blvgCvf8L9yinJSnxrltgxcFmNLuVT/ITCNJAhRf9rpZlXeuk9TTUzsGwbu8a9ZAHfOYTXZHKWueoy6e+DKPyuDKbVA3vrileSqJrO1eatSlOcNnj7u87RI+10n6+p0cHy1VGqVu/q++kqENaFrz8NNLWm3DBzaoAAOJRXAoaQCOJRUAIeSCuBQUgHcgvrvb2snyE8At5w+//Efa0fITwC3nADOIYBbRJ//9Pfq+8r/vHaQ7ARwi+jzyxeMcE4B3CL6/PINwDkFcIuoYg3gHAK4RQRwPgHcIgI4nwBuEVWsfXn9Zu0c+QngFlE9uP3TvFg7SHYCOJRUAIeSCuBQUgEcSiqAQ0kFcCipAA4lFcChpAI4lFQAh5Lq/3XAas2zW87rAAAAAElFTkSuQmCC" width="80%" style="display: block; margin: auto;" /></p>
<p>The advantages of tidy data and <code>ggplot</code> become clear when
we load more than one file at a time because we can group and color by
the third column, the name of the file from which the data was read.
<code>RaMS</code> will also automatically enable a loading bar if more
than one file is loaded; this can be disabled by setting the
<code>verbosity</code> parameter to 0.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>], <span class="at">grab_what =</span> <span class="st">&quot;BPC&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  <span class="er">|=======================</span>                                               <span class="er">|</span>  <span class="dv">33</span>%</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>  <span class="er">|===============================================</span>                       <span class="er">|</span>  <span class="dv">67</span>%</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">#&gt; Total time: 0.32 secs</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="fu">ggplot</span>(msdata<span class="sc">$</span>BPC) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>int, <span class="at">color=</span>filename))</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p>And of course, this means that all of <code>ggplot</code>’s aesthetic
power can be brought to your chromatograms as well, so customize
away!</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">ggplot</span>(msdata<span class="sc">$</span>BPC) <span class="sc">+</span> </span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>int, <span class="at">color=</span>filename), <span class="at">lwd=</span><span class="dv">1</span>, <span class="at">fill=</span><span class="st">&quot;#FFFFFF44&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.8</span>, <span class="fl">0.7</span>), <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">&quot;bold&quot;</span>),</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="st">&quot;250M&quot;</span>, <span class="st">&quot;500M&quot;</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">2.5e8</span>, <span class="fl">5e8</span>)) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#2596be&quot;</span>, <span class="st">&quot;#6c25be&quot;</span>, <span class="st">&quot;#bea925&quot;</span>)) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Retention time (minutes)&quot;</span>, <span class="at">y=</span><span class="st">&quot;Intensity&quot;</span>, </span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Base peak chromatogram&quot;</span>, <span class="at">color=</span><span class="st">&quot;Files:&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fl">7.50</span>, <span class="dv">9</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">5e8</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p><code>RaMS</code> also provides some basic file metadata extraction
capability, although the focus for this package is on the actual data
and other MS packages handle file metadata much more elegantly. This is
one area where there are major differences between mzML and mzXML file
types - the mzXML file type simply doesn’t encode as much metadata as
the mzML filetype, so <code>RaMS</code> can’t extract it.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Since the minification process strips some metadata, I use the </span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># less-minified DDA file here</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="fu">grabMSdata</span>(<span class="at">files =</span> data_files[<span class="dv">1</span>], <span class="at">grab_what =</span> <span class="st">&quot;metadata&quot;</span>)</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co">#&gt; Reading file DDApos_2.mzML.gz... 0.12 secs </span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co">#&gt; Reading file metadata...0.38 secs </span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co">#&gt; Binding files together into single data.table</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="co">#&gt; Total time: 0.51 secs</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="co">#&gt; $metadata</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="co">#&gt;                                   source_file  inst_data       config_data</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="co">#&gt; 1: 170223_Poo_AllCyanoAqExtracts_DDApos_2.raw None found &lt;data.frame[1x3]&gt;</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="co">#&gt;    timestamp n_spectra n_chromatograms ms_levels mz_lowest mz_highest</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="co">#&gt; 1:      &lt;NA&gt;      1994               0  MS1, MS2   50.0298    613.158</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="co">#&gt;    lambda_lowest lambda_highest rt_start   rt_end centroided polarity</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="co">#&gt; 1:            NA             NA  4.00085 14.99712       TRUE positive</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="co">#&gt;            filename</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="co">#&gt; 1: DDApos_2.mzML.gz</span></span></code></pre></div>
</div>
<div id="adding-a-column-ms1-data" class="section level3">
<h3>Adding a column: MS1 data</h3>
<p>MS1 data can be extracted just as easily, by supplying “MS1” to the
<code>grab_what</code> argument of <code>grabMSdata</code> function.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>], <span class="at">grab_what =</span> <span class="st">&quot;MS1&quot;</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>  <span class="er">|=======================</span>                                               <span class="er">|</span>  <span class="dv">33</span>%</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>  <span class="er">|===============================================</span>                       <span class="er">|</span>  <span class="dv">67</span>%</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt; Total time: 0.8 secs</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(msdata<span class="sc">$</span>MS1, <span class="dv">3</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">rt</th>
<th align="right">mz</th>
<th align="right">int</th>
<th align="left">filename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4.009</td>
<td align="right">139.0503</td>
<td align="right">1800550.12</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">4.009</td>
<td align="right">148.0967</td>
<td align="right">206310.81</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">4.009</td>
<td align="right">136.0618</td>
<td align="right">71907.15</td>
<td align="left">LB12HL_AB.mzML.gz</td>
</tr>
</tbody>
</table>
<p>So we’ve now got the <em>mz</em> column, corresponding to the
mass-to-charge ratio (<em>m/z</em>) of an ion. This means that we can
now filter our data for specific masses and separate out molecules with
different masses.</p>
<p>Note that this also makes the data much larger in R’s memory - so
don’t go loading hundreds of files simultaneously. If that’s necessary,
check out the section below on saving space.</p>
<p>Because <code>RaMS</code> returns <a href="https://cran.r-project.org/package=data.table">data.tables</a>
rather than normal <code>data.frame</code>s, indexing is super-fast and
a bit more intuitive than with base R. Below, I also use the
<code>pmppm</code> function from <code>RaMS</code> to produce a mass
range from an initial mass and spectrometer accuracy (here, 5
parts-per-million).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>adenine_mz <span class="ot">&lt;-</span> <span class="fl">136.06232</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>adenine_data <span class="ot">&lt;-</span> msdata<span class="sc">$</span>MS1[mz<span class="sc">%between%</span><span class="fu">pmppm</span>(adenine_mz, <span class="at">ppm=</span><span class="dv">5</span>)]</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="fu">ggplot</span>(adenine_data) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>int, <span class="at">color=</span>filename)) <span class="sc">+</span> <span class="fu">lims</span>(<span class="at">x=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">9</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p>This makes it easy to grab the data for multiple compounds of
interest with a simple loop, provided here by the <code>purrr</code>
package of the tidyverse:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>mzs_of_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">adenine=</span><span class="fl">136.06232</span>, <span class="at">valine=</span><span class="fl">118.0865</span>, <span class="at">homarine=</span><span class="fl">138.055503</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>mass_data <span class="ot">&lt;-</span> <span class="fu">imap_dfr</span>(mzs_of_interest, <span class="cf">function</span>(mz_i, name){</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="fu">cbind</span>(msdata<span class="sc">$</span>MS1[mz<span class="sc">%between%</span><span class="fu">pmppm</span>(mz_i, <span class="at">ppm=</span><span class="dv">10</span>)], name)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>})</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="fu">ggplot</span>(mass_data) <span class="sc">+</span> </span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>int, <span class="at">color=</span>filename)) <span class="sc">+</span> </span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>name, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">x=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">9</span>))</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1154 rows containing missing values (`geom_line()`).</span></span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnAAAAEgCAMAAAADq777AAABelBMVEUAAAAAADoAAGYAOmYAOpAAZpAAZrYAujgZGT8ZGWIZP2IZP4EZYp8aGhozMzM6AAA6ADo6AGY6OpA6ZmY6ZpA6ZrY6kNs/GRk/GT8/GWI/P2I/P4E/gb1NTU1NTW5NTY5NbqtNjshhnP9iGRliGT9iGWJiPxliYhlin9lmAABmADpmAGZmOjpmOpBmZjpmZmZmZrZmtv9uTU1uTW5uTY5ubo5ubqtuq8huq+SBPxmBPz+BYhmBgWKBn4GBvdmOTU2OTW6OTY6Obk2ObquOyP+QOgCQOjqQOmaQZpCQkDqQkGaQtpCQ27aQ2/+fYhmfvYGf2dmrbk2rbm6rbo6rjk2ryKur5OSr5P+2ZgC2Zjq2tma225C22/+2/9u2//+9gT+92Z+92b292dnIjk3I///Zn2LZvYHZ2Z/Z2b3Z2dnbkDrbkGbb/7bb///kq27k///r6+vy8vL4dm3/tmb/yI7/25D/27b/29v/5Kv//7b//8j//9v//+T///+g7hJeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAWAUlEQVR4nO2di2PUNp7Hh14P98EcZW83lIPQXdP2wj4v6babtneh24bug4ZLabdkX2WP0IThjmxwyF2A+H8/PazxS5blsSxL9vdTyEwsz4xqffjJ8m9kTWIALDLpuwJgXEA4YBUIB6wC4YBVIBywCoQDVjEr3AxYwWij2QXC+YjRRrMLhPMRo41mFwjnI0YbzS4QzkeMNppdIJyPGG00u0A4HzHaaHaBcD5itNHsAuF8xGij2WWcwj38cCW/Ye/Sdj81WQyjjWYXCOcjRhvNLmMSbu/idEpE2782fe3dFfrw6vZs7/LHdCOJcMmzZLvbGG00u4xIuP23N1jXefvK7DtiFnm4d45ISH57/T4Vjj9LtruN0Uazy4iEo+y/s03+0C6V6keeUgOpbZfEs2R73xVVY7TR7DIq4W5PSW/Jxge3V0jPOZ2+slEWjm/vu6pqjDaaXUYk3P41dq4mIhyPYmXhXI9uFKONZpcRCceMenMjcw7HT97ywiXb+66sGqONZpcRCTe7N2XD04cfilHqKxvlCJdsdxujjWaXMQk3HIw2ml0gnI8YbTS7QDgfMdpodoFwPmK00ewC4XzEaKPZxaxwhwVKG4zv0P0nOFCF8nH1FwjnQRUgXBUOtMUQqwDhnCHsuwKgIX5HuDCMo24/QWMHRLgm+C5cBOH8Qku40y+Xr94tbnx+Y/mHfy+UWW6LKIzCwxrjIJxbaAm3uxk/pXJlOf1yMz74UaHMcluE9E/Y5Sfo7ADhmqAj3PNfP+CPN5bfeiB+pz9OfvlAlHEstwUVLoRwXqEj3MkHX7Nuc3edxTQu3MkHf4+ff3JXlMXxPxG6rWuRMPcAvEBLuLVN6hfRi7r2dJmyTvtRKhwvS/a0+48/DFi5OsQhwrmFXoRjbpEedZlFs3yEYw/JnlbbgvgWMOGUwwYI5xZa53CfceHE6VruHO6zvoQLaYALgqAmxEE4t9AdpdJIRs7h0gHp6ZfrYpTaT5caRgErDyCcT2gJlwxPyUPmclxyHU4MXRk22wLCeYm3mQZy5saFo8YpzuIgnFt4m7wnAS55FpDnvVYFNMDjCBeI8iBSdKqIcG4xCOFUZ3EQzi00haOZ0wI9J+/DAML5iKZwB8tF4XpO3icBjpcHilEDhHMLPeFO3v90063kfV44RYiDcG6h9324O9/QLtWl5H0YZH4JkMD3Bi3hDtZpB+pU8j4MMuWIcP6gmbxnwjmUvBc9alKuuDAC4dxCR7gDHtNcSt4XhasOcRDOLZpcFnEoeS96VFEeQDhPaCKcO8n7eYCbC1cZ4iCcW/iZaYBw3uJn8j53UYQR4MKIH3ga4YJieWWyARHOLbwULu1RIZxvaAl3srZcyqX2mbxPA1xaXjVOhXBuoTWJ5pO78cl7hXs99Jm8lwsnD3EQzi10hHtKE6i7m+4k7yGcv+iew9Eo50ryvjxGpQT4orkPaF/4XXcneZ8JcJnyihCHCOcWesI9v7Eeu5O8rxBOPnkLwrmF5iiVjlFdSd5nfcuWy0MchHML3ZvZUBxJ3lcJJzcOwrmF/teTNh1J3meu+hbLZcZBOLfwL9OQC3CFcsnVXwjnFv4l75VZelwacR3vIlw+wJXKS50qIpxb+CdcXXlUs0P7Kph+AwhXJBkfSDfmyrpvi0KAk53j5ddugHBuoSOcyNPLNubLOm+Lom/yC8PZMAfh3EL3tvknv3xQmbynZZxu2yIMy5c9pG8QBmTXIOqgCp28AYQrINJX8uS9yDRIk/ehSYJGQ1CjH90vTf63XUfr60k8Ty9N3icPyZ4O/OMfYhVGGuGcSd7b/QQHqjA24Yrftaw+hwOgBr1RapKnlyTvRRkAWjS5DleVvC9fowOgAv9yqcBrIBywCoQDVoFwwCpmhZsBKxhtNLtAOB8x2mh2gXA+YrTR7ALhfMRoo9kFwvmI0UazC4TzEaONZhcI5yNGG80uEM5HKg7/o8mZW29sHb+xZbRRzQLhfER+9J9dX6UPEM4B9i5tG9nHEeRHPzENwjmARzLpID34x+cnk7PHvEt9cXMyeelb4t4tsnGVl02Wkt+XjvnGZCe7jEa4f51OV2az/WvTV7dnDz/69+n0ynfkLym5SAv2/uXdV//z0vbe5Y8zu7mL/OhT07hwL26eJWd0Lz8+Pv/y4/jRS9+yzpY88t8nfKPYyagBtYxFuItXZt+9fn92mz08/PAc2XKOxr39tzfow97FFf4w3+3eub7rrEB+9FPhjmjgIpYdn19lm//vMS/mvycbxU5GDahlLMKRLpXq9c72jCj28KONGf1LbSOQrUm52I1sp7s6i/zop8I9mjCW2Okc+3FEfj2zlf6e2cmoAbWMSzj6QEzLCXd7SrrPgnDXptPpKxt9V7oa+dHPCJd0lMKtZ9fPiKKMcLZ7U8a4hCtHuP1rKxnTMrs5jfzoZ7rUM1vzLaz3pG4dFSKc2Mku4xJOnMOlwrGCNzfywiW79V3pauRHPztoIIZlBKNuHZ8vCCd2MmpALSMTToxS0y713nT62rsrBeHIbi73qLXCsSsevBflm3fIr1+QQURWOLGTXUYi3MAw2mh2gXA+YrTR7ALhfMRoo9kFwvmI0UazC4TzEaONZhcI5yNGG80uSuHEfbhUN5U+WbO8Eo3tT3CgCmO5P9zTRCXVTaWf3yAPtleEtvoJDlRBU7gnclo7YhSFcLtX/8AjnOqm0l7dAbObBVUhXBN0utQWN5V2iCCOB74u0mCEU91UmnWpV32IcAGPcHo33u+mCsY+Qd5cgxFOdVNpOmj41R1PhKPLJkXGF+OCcE3QEU51U+n57wwH2qJih5AIF9F1bIJijINwVtERTnVTaRrkLC59tOgbBEQ48pf8DIl1gdHFuCBcE2qFS4anlTeVJqd0Nhd3W/ANQiYc/e8QwvXKSO6ASeJaTHSL6AK+xLphDldHKJwD//ilO5AAF9K+NKKrw9EwFwX5HbqvgtFPkB99tXDHF9gUVDZDdbI638LnqPJC8jPZa86zH2/lXlPk+PxZ8nPnpdILq6gW7oBd/tgUT98qrjbjUWqLeMb7Ug59Ol7hmGV8ItdL3zKh6LeEq4Q7+sVS9jUljt/4/uP42U/LL6xCHeGSMcLuZrlIpLbooMH11BY9bcusJA3hXny+Fe+cuUWeHrEAtVol3IvPv/jZ4/Q19OfvJ5OlIzq7cGdCZ/pf+Dkx9he5Fz67PvmHn26x4obCJTmr0+Q6W2Vqy/XLIlS43Mq+QZiOG4YkXFSiIsJ973G6hUa5KuHIjjur2dfQ6fq0GxUOHl/402r837dyL9xZ4nNzuKJNhEuud7ArvpuxNLWVRjh3U1tsxBAUtgXyfX2mwTncyxnhXtxcSrZOSqdij5ZoDMy8hkpE/7JzO1J6fOHPP3jxmz9nhXv2k2+5a49kc6xVwomk/Ml7d2mUk6a2bK95v8gbhPRab3Ht8vni0kOKcNpd6s3V+ZZn18VZWjnC0XldwkL+mqxwNOYdX/jrb//n33IvpJvpLjwkNhHuafZLcLub8vVSiYxP33K6Sw2LrjFGLRw5axNP2Z1GqoRjzogzvJ2CcCyKkaI//n7pWBLhpB2qWjjSheaEk6W2PFgROpQXCOPGKBzrENlT7luVcI9o4dHZzGsywrEekxTRCdeSczhph5oXLrmTzlFyzzAxVmCR7vSrB9LUlvsRTh7gRigcOxE7W7gOx+9okxml8r34S178hvW5P76VvIaUp8J9cZ1u/GemWvpC+kZklPqPn/PisnQK4Xjgoqmtg6QrrUhtpRsdaIsiYSD92mVaMBbhrFJ9VS4VLrl7k/zqib9UDkeJcFYr0j3mhEsGrYvdB0J9BwlJhGuBA//4C1QGuEMxmECEs4pi0JAmtDyetaUULrJSBQiXJSfc/PIf+22e0FLO2nI8tRVW+sa+k2mjChAuS1Y4dpfhOfNBav2sLYdTWwrhkj4Vwlml+hxOJLTUs7YcT20pM1hDGzZ4JxxPXgiShFasnrXleGorjBQ78JM4RDir5M7hjkrLRLDzONWsLccv/CqF48ZBOKvku9RJdtBAYcKpZm25ndqinaa6GMJZpvqyiEhoqWdtuR3hyJABwpnUpT3q63CkA9WYteVsaosKpd4BwtlmLhwZokq6VL+pHYYOa5zql3BGcOAff5b6AFbT57avgpEdBhnhypysJdfhfJ21pXGKNiLhFpsmeMS/W66YKNhwpmC1cOxONe+x0zNPZ22xTELtMFaRimhfBTM7GBWu0TTBR/T0auflx/wrmPIvdzSbKagYpdKkAlPN11lbocZ13VB+l0JTVTCzg3HhdKcJJt/yvSnK+cStVjMF1edw/Aqbp7O2tEYEQxo2PHkSlKiIcJrTBI/EgoPJfJvEvzYzBZXC0WttsbeztvRy82FcF+IGFuGaTBM8Opt7sZgL3WamoHKa4I3MLBrvZm1pft1N8YW51lUwtYP5LlVzmuB8pl8uwrWaKagcpWbHCt7N2tL9Qq/qC0wtq2BqB+PC6U4TLJzDHRXnQi8wU7BauNQ3L2dtac+RCeqMG6BwutMEpaPUdjMFa++e5OusLf1JWXWd6lCEaz5NMC5fh2s9U3CoNyRsMvoMw7DDmthDLZxtKq7KDTW1NQ9bOp9Ae9XqKDeQCNeEVtMEY+VMwYEKl3aTWsIFoeJErjvh+KUyB4XrEIVw6RU21TRBJ6/DNb/9GwlyYcVNSDoSjkieEEA4Sjo5UDVNMF9mqC0a7CAtzw4DtD8hDA5Z80cRTXdF5R0WraJkBybb/COoc8pxyziES1f+UE0TzKwPEvcvnAgZi30C7d8iupBD2DlRoQqyfehN/iN2q9hxCJcu29Zicbfumy7fRp0dp8UI2J/sjwaE9Ab/zH7NF3guXJpDUE0TdDfTMKAqjDTCyXOpufVSQZ94LlzpHE6aS82fw4E+8Vw4MTlQPU0w3Qv0jefCJVfY6qYJSq/RgT7wXTjgGRAOWAXCAauohVtkmiDf+cwWf5TdB9/gaoKLMANWkB99PeGaTBMUv1XbZHg1wab03RBjQX709YXTnSZYFq7b1QQb03dDjAX50X/ypJzsq4hwmtMEJcJ1uppgY/puiLEgP/oNzuE0pwmKndkjC1edribYnL4bYizIj36DLlV3mqCkS+1wNcHm9N0QY0F+9PWF015NUCWc+dUEm9N3Q4wF+dHXF053mqBSuParCban74YYC/KjXyPcAtMEk1O71VRWo6sJQjhfWEQ4q1RflRu3cHuXtsmfvmvRHPnRNyecpdUE29N3QzTFS9tmHkS4akYn3N7l+7OHH23sXZxOV5IIt3f5Y/rLbP/a9FU/BJQffQjnIkQ2It3f3t4QtpE/F6/Mvnv9/uz2ldm9c33XTwv50YdwTnLvCv1D2H9ne+4ctW+fSEi29V0/HYw2ml3GJ9ze5f8iQW52e0r6z7xw16bT6SsbfddPB6ONZpfxCffwo/+4fH//2kqmS02E8yO6UYw2ml3GJ9zs3vQKG57uvbmRE46ew9FTOQ8w2mh2GaFwRDRq3fS1d1fywpE+1Y8eFcIJ+m6IsWC00ewC4XzEaKPZBcL5iNFGswuE8xGjjWYXTeHofQcLyFYT7LshxoK59reOpnAHy0XhpKsJ9t0QY8GkAZbRE+7k/U83/VtNcDBV0Lw/nBdoCXd655sv/VtNELiIlnAH67QD9W01wf6rEHT1Cd350Dk6wpFgxoTzazXB/qtAl2CoX5R6kU/o0oiO0RGOr7q17tlqgn1XIYBwMppcFvFqNcHeqxAw5SBcgSbCebWaYO9VgHBScH+4rggWWpxh8Ax0cbf+qxAkY1SNtdsQ4Ram6ZGEcIt9gtFGs4uWcOQ87a3SUgyyXGrTIzlo4eaPEC6D1nU4ugp5xWqC+Vxq0yMJ4Rb7BMMS2ES3S61aTRC5VHl5kHkC4TLoCpesRINcqiZB6QlgaH5bZO3qXeRSG5QH2WeIcBl0I1zlaoLINKiFI08hXAbtyyK7m8il6pdDuCp0hBNSIZeqWx7knkO4DHrfh0u6UuRSNcshXCXIpXZBUPnL6EFqq4MqBPnfEOEyQDgIZxUt4U7WlkvTBJFLrSzP+BYdQrg8OsLRESodjeZALrWyPBUuiqhyQXGH1p9g2gKLaF0Wofms3U3kUjXLhWBEN/YXwmVokGlALlUPMSqNyH/0J4apWbTnNKwjl6pZngS06FA8IsJl0BPu+Y31GPNSNcu5X8I38iSuMw7CFThZo2NU5FL1ygvCHUYQLoPWN37X+DUR5FK1yqleUeobhMuhP/N+UyOXCvgQgY8XBBFGDSnINJiuAgtw/GkYsocIES4FwnUnXMj+aIxTIVwJOoemAFJb0vK5bzy80R9xXYiDcEWeluelIrUlLxfC8d4UwhXREm736h9ohENqS6M8YL6FQjga6OK6PhXClWBdKlJb9fAxakj+E9BnGKfOaSAcUlsa5SLAZQjjumEDIlyJZOI9Ult15Uy4nG9UuJorIxCuBBMOqa3acolvLN6pQxyEKyHO4ZDaUpcHEt8OY2pcoDAOwpU4SUapmCaoLKcBruQb2SFUhzgIBxYjiKNQWhDGEUaqDKS2DFYhkMU3tgO9LlfdqSLCLUrTIzks4QKRrZfsEHLlAql1EK5A7lpbYSOuw4nyQK6b2IEYJwhCal4iICFmg43qs7yxCZekTaUb82VN22rRHcKacpNViBJfwowxcqKKdyh9An+noObt2A7U4vLEVrMOWEVrXiq/5CbNpYoyTunA1B3TBaltKxlRxJyJojpx5B9JQlLEukTyXzS/SbmGsQvvELKcBan12IRLkgrSXKoocz2XSvotIk0URvTfQLJoB+iBBveHk+ZSkWno4xO6NKJjGkQ4eS71g6xwRdqHvNbvMIQqONxzNKbBOZw0l5o/hysyhNZ2oApjEy5Jm0pzqaJMzhBa24EqjE24zCW3ci5Veo1OMITWdqAKoxMOAFNAOGAVCAesAuGAVSAcsEqnwtHMfhvoXXTKKwM3qkDLO+2I+/gsTu7OBL28gVt0KtxBq6Zi9xVuB3mDp9UXbTRp9Q75OxMs8gY3Ntu9gWN0KdzJ+5+2Mub0Tsv7gKW3BGjzJpWJOx3ydyZY9A1aVcEtOhTu9M437bpUlrxt1Z198HX7m9dV51F0aB3hIJw2B+stz+HoFMRWUY7eupM2WBvaNrYyE6P1etKlDuiWj90JR1q67aCB0uY8zkR0aHkOmJ+3u9A7rC3/qu25hUN0Jxwf4K23fZs2wj3/rL1wu+3+D/LfF1wQI+eijuDyZRHaWKdftTnWu6271LYDl9YRjp0EtjqNdAuXhRMLAy+OmIXR4h3aRqfWN90mbzCgqyLINAC7QDhgFQgHrALhgFUgHLAKhANWgXDx//6l7xqMCQh3/MZW31UYExAOwlll1MIdX/jdhLLUd0VGxLiFO38WEc4yIxduFcJZZtzCUdcgnFUgHISzCoSDcFaBcM+ur/ZdjzEB4eKdydm+KzIiRi0csA+EA1aBcMAqEA5YBcIBq0A4YBUIB6wC4YBVIBywCoQDVvl/85EZdrDRVnAAAAAASUVORK5CYII=" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="moving-along-ms2-data" class="section level3">
<h3>Moving along: MS2 data</h3>
<p><code>RaMS</code> also handles MS<sup>2</sup> data elegantly. Request
it with the “MS2” option for <code>grab_what</code>, although it’s often
a good idea to grab the MS1 data alongside.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files[<span class="dv">1</span>], <span class="at">grab_what =</span> <span class="st">&quot;everything&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co">#&gt; Reading file DDApos_2.mzML.gz... 0.41 secs </span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">#&gt; Reading MS1 data...0.29 secs </span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">#&gt; Reading MS2 data...0.11 secs </span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt; Reading BPC...0.17 secs </span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt; Reading TIC...0.17 secs </span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt; Reading file metadata...0.37 secs </span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt; Binding files together into single data.table</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt; Total time: 1.52 secs</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(msdata<span class="sc">$</span>MS2, <span class="dv">3</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">rt</th>
<th align="right">premz</th>
<th align="right">fragmz</th>
<th align="right">int</th>
<th align="right">voltage</th>
<th align="left">filename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4.008767</td>
<td align="right">104.071</td>
<td align="right">54.06526</td>
<td align="right">1067.209</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">4.008767</td>
<td align="right">104.071</td>
<td align="right">54.45449</td>
<td align="right">1073.694</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">4.008767</td>
<td align="right">104.071</td>
<td align="right">57.03421</td>
<td align="right">2519.131</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
</tbody>
</table>
<p>DDA data can be plotted nicely with <code>ggplot2</code> as well.
Typically it makes sense to filter for a precursor mass, then render the
fragments obtained.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>homarine_mz <span class="ot">&lt;-</span> <span class="fl">137.047678+1.007276</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>homarine_MS2 <span class="ot">&lt;-</span> msdata<span class="sc">$</span>MS2[premz<span class="sc">%between%</span><span class="fu">pmppm</span>(homarine_mz, <span class="dv">5</span>)]</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>homarine_MS2<span class="sc">$</span>int <span class="ot">&lt;-</span> homarine_MS2<span class="sc">$</span>int<span class="sc">/</span><span class="fu">max</span>(homarine_MS2<span class="sc">$</span>int)</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="fu">ggplot</span>(homarine_MS2) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>fragmz, <span class="at">y=</span>int)) <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span>fragmz, <span class="at">xend=</span>fragmz, <span class="at">y=</span>int, <span class="at">yend=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;0%&quot;</span>, <span class="st">&quot;50%&quot;</span>, <span class="st">&quot;100%&quot;</span>)) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Fragment m/z&quot;</span>, <span class="at">y=</span><span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p>This is also the perfect place to enable some interactivity with
packages such as <code>plotly</code>, making data exploration not only
simple but also highly intuitive.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="do">## Not run to save space in the vignette:</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>msdata <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files, <span class="at">grab_what =</span> <span class="fu">c</span>(<span class="st">&quot;MS1&quot;</span>, <span class="st">&quot;MS2&quot;</span>, <span class="st">&quot;BPC&quot;</span>))</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>compound_MS1 <span class="ot">&lt;-</span> msdata<span class="sc">$</span>MS1 <span class="sc">%&gt;%</span> </span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>  <span class="fu">filter</span>(mz<span class="sc">%between%</span><span class="fu">pmppm</span>(homarine_mz, <span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(filename, <span class="st">&quot;DDA&quot;</span>))</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>compound_MS2 <span class="ot">&lt;-</span> msdata<span class="sc">$</span>MS2[premz<span class="sc">%between%</span><span class="fu">pmppm</span>(homarine_mz, <span class="dv">10</span>)] <span class="sc">%&gt;%</span> </span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>  <span class="fu">group_by</span>(rt) <span class="sc">%&gt;%</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(int)) <span class="sc">%&gt;%</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">frags=</span><span class="fu">paste</span>(</span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">round</span>(fragmz, <span class="at">digits =</span> <span class="dv">3</span>), <span class="fu">round</span>(int), <span class="at">sep =</span> <span class="st">&quot;: &quot;</span>), <span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>    <span class="at">.groups=</span><span class="st">&quot;drop&quot;</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">int=</span><span class="fu">approx</span>(<span class="at">x =</span> compound_MS1<span class="sc">$</span>rt, <span class="at">y=</span>compound_MS1<span class="sc">$</span>int, <span class="at">xout =</span> rt)<span class="sc">$</span>y)</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="fu">plot_ly</span>(compound_MS1) <span class="sc">%&gt;%</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">type=</span><span class="st">&quot;scatter&quot;</span>, <span class="at">mode=</span><span class="st">&quot;lines&quot;</span>, <span class="at">x=</span><span class="sc">~</span>rt, <span class="at">y=</span><span class="sc">~</span>int, <span class="at">color=</span><span class="sc">~</span>filename,</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>            <span class="at">hoverinfo=</span><span class="st">&quot;none&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">type=</span><span class="st">&quot;scatter&quot;</span>, <span class="at">mode=</span><span class="st">&quot;markers&quot;</span>, <span class="at">x=</span><span class="sc">~</span>rt, <span class="at">y=</span><span class="sc">~</span>int,</span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>            <span class="at">text=</span><span class="sc">~</span>frags, <span class="at">hoverinfo=</span><span class="st">&quot;text&quot;</span>, <span class="at">showlegend=</span><span class="cn">FALSE</span>,</span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>            <span class="at">marker=</span><span class="fu">list</span>(<span class="at">color=</span><span class="st">&quot;black&quot;</span>), <span class="at">data =</span> compound_MS2) <span class="sc">%&gt;%</span></span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">annotations=</span><span class="fu">list</span>(<span class="at">x=</span><span class="fu">min</span>(compound_MS2<span class="sc">$</span>rt), <span class="at">y=</span><span class="fu">median</span>(compound_MS2<span class="sc">$</span>int)<span class="sc">*</span><span class="dv">10</span>, </span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a>                          <span class="at">text=</span><span class="st">&quot;Mouse over to see</span><span class="sc">\n</span><span class="st">MSMS fragments&quot;</span>))</span></code></pre></div>
<p>Easy access to MS<sup>2</sup> data also allows us to rapidly perform
simple operations such as searching for a specific fragment mass. For
example, if we know that homarine typically produces a fragment with a
mass of 94.06567, we simply subset the MS<sup>2</sup> data for fragments
in a range around that mass:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>homarine_frag_mz <span class="ot">&lt;-</span> <span class="fl">94.06567</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>msdata<span class="sc">$</span>MS2[fragmz<span class="sc">%between%</span><span class="fu">pmppm</span>(homarine_frag_mz, <span class="at">ppm =</span> <span class="dv">5</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">rt</th>
<th align="right">premz</th>
<th align="right">fragmz</th>
<th align="right">int</th>
<th align="right">voltage</th>
<th align="left">filename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4.202267</td>
<td align="right">138.0550</td>
<td align="right">94.06548</td>
<td align="right">2639.737</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">4.561233</td>
<td align="right">138.0550</td>
<td align="right">94.06560</td>
<td align="right">4301.696</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">4.900883</td>
<td align="right">138.0550</td>
<td align="right">94.06550</td>
<td align="right">1678.091</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">5.719433</td>
<td align="right">138.0550</td>
<td align="right">94.06572</td>
<td align="right">32145.883</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">5.832950</td>
<td align="right">139.0520</td>
<td align="right">94.06569</td>
<td align="right">698355.375</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">6.063700</td>
<td align="right">138.0549</td>
<td align="right">94.06567</td>
<td align="right">15944193.000</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
</tbody>
</table>
<p>We find that there’s not only homarine that produces that fragment,
but at least one other compound. Precursor masses like this can then be
searched manually in online databases or, since the data is already in
R, passed to a script that automatically queries them.</p>
<p>Similarly, we can easily search instead for neutral losses with this
method. If we suspect other molecules are producing a similar neutral
loss as homarine:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>homarine_neutral_loss <span class="ot">&lt;-</span> homarine_mz <span class="sc">-</span> homarine_frag_mz</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>msdata<span class="sc">$</span>MS2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(msdata<span class="sc">$</span>MS2, <span class="at">neutral_loss=</span>premz<span class="sc">-</span>fragmz) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;rt&quot;</span>, <span class="st">&quot;premz&quot;</span>, <span class="st">&quot;fragmz&quot;</span>, <span class="st">&quot;neutral_loss&quot;</span>, <span class="st">&quot;int&quot;</span>, <span class="st">&quot;voltage&quot;</span>, <span class="st">&quot;filename&quot;</span>)</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>msdata<span class="sc">$</span>MS2[neutral_loss<span class="sc">%between%</span><span class="fu">pmppm</span>(homarine_neutral_loss, <span class="at">ppm =</span> <span class="dv">5</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(int)) <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<colgroup>
<col width="12%" />
<col width="11%" />
<col width="11%" />
<col width="16%" />
<col width="14%" />
<col width="10%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">rt</th>
<th align="right">premz</th>
<th align="right">fragmz</th>
<th align="right">neutral_loss</th>
<th align="right">int</th>
<th align="right">voltage</th>
<th align="left">filename</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">6.063700</td>
<td align="right">138.0549</td>
<td align="right">94.06567</td>
<td align="right">43.98918</td>
<td align="right">15944193.0</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">6.399933</td>
<td align="right">138.0549</td>
<td align="right">94.06569</td>
<td align="right">43.98921</td>
<td align="right">11094394.0</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">8.438167</td>
<td align="right">138.0549</td>
<td align="right">94.06567</td>
<td align="right">43.98921</td>
<td align="right">1218680.0</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">11.810417</td>
<td align="right">104.0710</td>
<td align="right">60.08154</td>
<td align="right">43.98949</td>
<td align="right">556172.8</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="odd">
<td align="right">11.469117</td>
<td align="right">104.0710</td>
<td align="right">60.08154</td>
<td align="right">43.98947</td>
<td align="right">509088.7</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
<tr class="even">
<td align="right">6.739650</td>
<td align="right">138.0550</td>
<td align="right">94.06568</td>
<td align="right">43.98931</td>
<td align="right">334129.3</td>
<td align="right">35</td>
<td align="left">DDApos_2.mzML.gz</td>
</tr>
</tbody>
</table>
<p>We can again confirm our suspicions that there’s another signal with
a similar neutral loss: one with a mass of 104.0710.</p>
</div>
<div id="continuing-chromatograms" class="section level3">
<h3>Continuing: chromatograms!</h3>
<p>mzMLs can also contain precompiled chromatograms. Version 1.3 of RaMS
enabled the extraction of these chromatograms just like MS<sup>1</sup>
or MS<sup>2</sup> data and added the new <code>chroms</code> slot to
hold them. However, these need to be requested using
<code>grab_what = &quot;chroms&quot;</code>and will create this new slot in the
returned object. Chromatograms are returned as a <code>data.table</code>
with seven columns: chromatogram type (usually TIC, BPC or SRM info),
chromatogram index, target mz, product mz, retention time (rt), and
intensity (int). This allows simple plotting of various chromatograms
such as those returned by MRM:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>chrom_file <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;wk_chrom.mzML.gz&quot;</span>, <span class="at">package =</span> <span class="st">&quot;RaMS&quot;</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>msdata_chroms <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(chrom_file, <span class="at">verbosity =</span> <span class="dv">0</span>, <span class="at">grab_what =</span> <span class="st">&quot;chroms&quot;</span>)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>given_chrom <span class="ot">&lt;-</span> msdata_chroms<span class="sc">$</span>chroms[chrom_type<span class="sc">==</span><span class="st">&quot;SRM iletter1&quot;</span>]</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>ptitle <span class="ot">&lt;-</span> <span class="fu">with</span>(given_chrom, <span class="fu">paste0</span>(</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>  <span class="fu">unique</span>(chrom_type), <span class="st">&quot;: Target m/z = &quot;</span>, <span class="fu">unique</span>(target_mz), <span class="st">&quot;; Product m/z = &quot;</span>, </span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>  <span class="fu">unique</span>(product_mz)</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>))</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="fu">plot</span>(given_chrom<span class="sc">$</span>rt, given_chrom<span class="sc">$</span>int, <span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">main=</span>ptitle)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<p>Version 1.3 also enabled support for DAD (diode array detection)
data. This data type can be requested using <code>grab_what = DAD</code>
and will return an additional item in the list with columns for
retention time, wavelength, and intensity.</p>
</div>
</div>
<div id="advanced-rams-usage" class="section level2">
<h2>Advanced RaMS usage</h2>
<p>The sections below will likely be of interest to users who are
already familiar with <code>RaMS</code> and are looking to optimize
speed, reduce memory requirements, or are otherwise interested in the
details of what <code>RaMS</code> does under the hood. If you’re just
getting started, I strongly recommend applying <code>RaMS</code> to your
own data before you read on. For a more detailed analysis of the first
two sections on saving space and speeding things up, consider also
browsing the <a href="https://cran.r-project.org/web/packages/RaMS/vignettes/speed_size_comparison.html">speed
&amp; size comparison vignette</a></p>
<div id="saving-space-eics-and-rtrange" class="section level3">
<h3>Saving space: EICs and rtrange</h3>
<p>Mass-spec files are typically tens or hundreds of megabytes in size,
which means that the simultaneous analysis of many files can easily
exceed a computer’s memory. Since <code>RaMS</code> stores all data in
R’s working memory, this can become a problem for large analyses.</p>
<p>However, much of the usage envisioned for <code>RaMS</code> on this
scale doesn’t require access to the entire file, the entire time.
Instead, users are typically interested in a few masses of interest or a
specific time window. This means that while each file still needs to be
read into R in full to find the data of interest, extraneous data can be
discarded before the next file is loaded.</p>
<p>This functionality can be enabled by passing “EIC” and/or “EIC_MS2”
to the <code>grab_what</code> argument of <code>grabMSdata</code>, along
with a vector of masses to extract (mz) and the instrument’s ppm
accuracy. When this is enabled, files are read into R’s memory
sequentially, the mass window is extracted, and the rest of the data is
discarded.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files, <span class="at">grab_what =</span> <span class="fu">c</span>(<span class="st">&quot;MS1&quot;</span>, <span class="st">&quot;MS2&quot;</span>))</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>  <span class="er">|==================</span>                                                    <span class="er">|</span>  <span class="dv">25</span>%</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>  <span class="er">|===================================</span>                                   <span class="er">|</span>  <span class="dv">50</span>%</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a>  <span class="er">|====================================================</span>                  <span class="er">|</span>  <span class="dv">75</span>%</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="co">#&gt; Total time: 1.72 secs</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a>mzs_of_interest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">adenine=</span><span class="fl">136.06232</span>, <span class="at">valine=</span><span class="fl">118.0865</span>)</span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a>small_data <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files, <span class="at">grab_what =</span> <span class="fu">c</span>(<span class="st">&quot;EIC&quot;</span>, <span class="st">&quot;EIC_MS2&quot;</span>),</span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a>                         <span class="at">mz=</span>mzs_of_interest, <span class="at">ppm =</span> <span class="dv">5</span>)</span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a>  <span class="er">|==================</span>                                                    <span class="er">|</span>  <span class="dv">25</span>%</span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a>  <span class="er">|===================================</span>                                   <span class="er">|</span>  <span class="dv">50</span>%</span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a>  <span class="er">|====================================================</span>                  <span class="er">|</span>  <span class="dv">75</span>%</span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a><span class="co">#&gt; Total time: 1.63 secs</span></span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a></span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a>all_data<span class="sc">$</span>MS1 <span class="sc">%&gt;%</span></span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type=</span><span class="st">&quot;All data&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a>  <span class="fu">rbind</span>(small_data<span class="sc">$</span>EIC <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">type=</span><span class="st">&quot;Extracted data only&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(filename, <span class="st">&quot;DDA&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-35"><a href="#cb18-35" tabindex="-1"></a>  <span class="fu">filter</span>(rt<span class="sc">%between%</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">15</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-36"><a href="#cb18-36" tabindex="-1"></a>  <span class="fu">group_by</span>(rt, filename, type) <span class="sc">%&gt;%</span></span>
<span id="cb18-37"><a href="#cb18-37" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TIC=</span><span class="fu">sum</span>(int), <span class="at">.groups=</span><span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-38"><a href="#cb18-38" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb18-39"><a href="#cb18-39" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>TIC, <span class="at">color=</span>filename)) <span class="sc">+</span></span>
<span id="cb18-40"><a href="#cb18-40" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co"># Size reduction factor:</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">object.size</span>(all_data)<span class="sc">/</span><span class="fu">object.size</span>(small_data))</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co">#&gt; [1] 16.10698</span></span></code></pre></div>
<p>As expected, the size of the <code>small_data</code> object is much
smaller than the <code>all_data</code> object, here by a factor of about
15x. For files that haven’t already been “minified”, that size reduction
will be even more significant. Of course, this comes with the cost of
needing to re-load the data a second time if a new mass feature becomes
of interest but this shrinkage is especially valuable for targeted
analyses where the analytes of interest are known in advance.</p>
<p>A second way of reducing file size is to constrain the retention time
dimension rather than the m/z dimension. This can be done with the
<code>rtrange</code> argument, which expects a length-two vector
corresponding to the upper and lower bounds on retention time. This is
useful when a small time window is of interest, and only the data
between those bounds is relevant. Below, peaks are deliberately sliced
in half to show that this is filtering on retention time instead of
mass.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>small_data <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files, <span class="at">grab_what =</span> <span class="fu">c</span>(<span class="st">&quot;MS1&quot;</span>, <span class="st">&quot;MS2&quot;</span>), <span class="at">rtrange =</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">8</span>))</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>  <span class="er">|==================</span>                                                    <span class="er">|</span>  <span class="dv">25</span>%</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>  <span class="er">|===================================</span>                                   <span class="er">|</span>  <span class="dv">50</span>%</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>  <span class="er">|====================================================</span>                  <span class="er">|</span>  <span class="dv">75</span>%</span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="co">#&gt; Total time: 1.28 secs</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>all_data<span class="sc">$</span>MS1 <span class="sc">%&gt;%</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type=</span><span class="st">&quot;All data&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a>  <span class="fu">rbind</span>(small_data<span class="sc">$</span>MS1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">type=</span><span class="st">&quot;Extracted data only&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(filename, <span class="st">&quot;DDA&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a>  <span class="fu">group_by</span>(rt, filename, type) <span class="sc">%&gt;%</span></span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TIC=</span><span class="fu">sum</span>(int), <span class="at">.groups=</span><span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>rt, <span class="at">y=</span>TIC, <span class="at">color=</span>filename)) <span class="sc">+</span></span>
<span id="cb20-23"><a href="#cb20-23" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="co"># Size reduction factor:</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">object.size</span>(all_data)<span class="sc">/</span><span class="fu">object.size</span>(small_data))</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="co">#&gt; [1] 6.731661</span></span></code></pre></div>
<p>The savings are also worth noting here, but constraining the
retention time also speeds up data retrieval slightly. Since
<em>m/z</em> and intensity data is encoded in mzML and mzXML files while
retention time information is not, eliminating scans with a retention
time window removes the need to decode the intensity and <em>m/z</em>
information in those scans.</p>
<p>However, decoding is rarely the rate-limiting step and for more
information about speeding things up, continue to the next section.</p>
</div>
<div id="speeding-things-up" class="section level3">
<h3>Speeding things up</h3>
<p>So, <code>RaMS</code> isn’t fast enough for you? Let’s see what we
can do to improve that. The first step in speeding things up is
discovering what’s slow. Typically, this is the process of reading in
the mzML/mzXML file rather than any processing that occurs afterward,
but this is not always the case. To examine bottlenecks,
<code>RaMS</code> includes timing information that’s produced if the
<code>verbosity</code> argument is set to 2 or higher.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> <span class="fu">grabMSdata</span>(data_files, <span class="at">grab_what =</span> <span class="fu">c</span>(<span class="st">&quot;MS1&quot;</span>, <span class="st">&quot;MS2&quot;</span>), <span class="at">verbosity =</span> <span class="dv">2</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>  <span class="er">|</span>                                                                      <span class="er">|</span>   <span class="dv">0</span>%</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="co">#&gt; Reading file DDApos_2.mzML.gz... 0.43 secs </span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="co">#&gt; Reading MS1 data...0.3 secs </span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="co">#&gt; Reading MS2 data...0.11 secs </span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a>  <span class="er">|==================</span>                                                    <span class="er">|</span>  <span class="dv">25</span>%</span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a><span class="co">#&gt; Reading file LB12HL_AB.mzML.gz... 0.15 secs </span></span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a><span class="co">#&gt; Reading MS1 data...0.12 secs </span></span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a><span class="co">#&gt; Reading MS2 data...0.01 secs </span></span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a>  <span class="er">|===================================</span>                                   <span class="er">|</span>  <span class="dv">50</span>%</span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a><span class="co">#&gt; Reading file LB12HL_CD.mzML.gz... 0.15 secs </span></span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a><span class="co">#&gt; Reading MS1 data...0.12 secs </span></span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a><span class="co">#&gt; Reading MS2 data...0.01 secs </span></span>
<span id="cb22-20"><a href="#cb22-20" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb22-21"><a href="#cb22-21" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb22-22"><a href="#cb22-22" tabindex="-1"></a>  <span class="er">|====================================================</span>                  <span class="er">|</span>  <span class="dv">75</span>%</span>
<span id="cb22-23"><a href="#cb22-23" tabindex="-1"></a><span class="co">#&gt; Reading file LB12HL_EF.mzML.gz... 0.13 secs </span></span>
<span id="cb22-24"><a href="#cb22-24" tabindex="-1"></a><span class="co">#&gt; Reading MS1 data...0.11 secs </span></span>
<span id="cb22-25"><a href="#cb22-25" tabindex="-1"></a><span class="co">#&gt; Reading MS2 data...0.01 secs </span></span>
<span id="cb22-26"><a href="#cb22-26" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb22-27"><a href="#cb22-27" tabindex="-1"></a>  <span class="sc">|</span>                                                                            </span>
<span id="cb22-28"><a href="#cb22-28" tabindex="-1"></a>  <span class="er">|======================================================================|</span> <span class="dv">100</span>%</span>
<span id="cb22-29"><a href="#cb22-29" tabindex="-1"></a><span class="co">#&gt; Binding files together into single data.table</span></span>
<span id="cb22-30"><a href="#cb22-30" tabindex="-1"></a><span class="co">#&gt; Total time: 1.65 secs</span></span></code></pre></div>
<p>In general, slow file read times can be improved by compressing the
data. mzML files are highly compressible, with options to compress both
the data itself using the <code>zlib</code> method and the files as a
whole using <code>gzip</code>.</p>
<p><code>gzip</code> is the simplest one to use, as a plethora of
methods exist to compress files this way, including online sites.
<code>RaMS</code> can read the data directly from a gzipped file, no
decompression necessary, so this is an easy way to reduce file size and
read times. Sharp-eyed users will have noticed that the demo files are
already gzipped, which is part of the reason they are so small.</p>
<p><code>zlib</code> compression is slightly trickier, and is most often
performed with tools such as <a href="https://proteowizard.sourceforge.io/doc_users.html">Proteowizard</a>’s
<code>msconvert</code> tool with the option “-z”.</p>
<p>Read times may also be slow if files are being accessed via the
Internet, either through a VPN or network drive. If your files are
stored elsewhere, consider first moving those files somewhere more local
before reading data from them.</p>
<p>If the bottleneck appears when reading MS<sup>1</sup> data, consider
restricting the retention time range with the <code>rtrange</code>
argument or using more detailed profiling tools such as RStudio’s
“Profile” options or the <code>profvis</code> package. Pull requests
that improve data processing speed are always welcome!</p>
<p>While the package is not currently set up for parallel processing,
this is a potential future feature if a strong need is demonstrated.</p>
</div>
<div id="finer-control-grabmzmldata-grabmzxmldata" class="section level3">
<h3>Finer control: grabMzmlData, grabMzxmlData</h3>
<p>While there’s only one main function (<code>grabMSdata</code>) in
<code>RaMS</code>, you may have noticed that two other functions have
been exposed that perform similar tasks: <code>grabMzmlData</code> and
<code>grabMzxmlData</code>. The main function <code>grabMSdata</code>
serves as a wrapper around these two functions, which detects the file
type, adds the “filename” column to the data, and loops over multiple
files if provided. However, there’s often reason to use these internal
functions separately.</p>
<p>For one, the objects themselves are smaller because they don’t have
the filename column attached yet. You as the user will need to keep
track of which data belongs to which files in this case.</p>
<p>Another use case might be applying functions to each file
individually, perhaps aligning to a reference chromatogram or
identifying peaks. Rather than spending the time to bind the files
together and immediately separate them again, these functions have been
exposed to skip that step.</p>
<p>Finally, these functions are useful for parallelization. Because
iterating over each mass-spec file is often the largest reasonable
chunk, these functions can be passed directly to parallel processes like
<code>mclapply</code> or <code>doParallel</code>. However,
parallelization is a beast best handled by individual users because its
actual implementation often differs wildly and its utility depends
strongly on individual setups (remember that parallelization won’t help
with slow I/O times, so it may not always improve data processing
speed.)</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="do">## Not run:</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="fu">library</span>(parallel)</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>cl <span class="ot">&lt;-</span> <span class="fu">makeCluster</span>(<span class="fu">getOption</span>(<span class="st">&quot;cl.cores&quot;</span>, <span class="fu">detectCores</span>()<span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>output_data <span class="ot">&lt;-</span> <span class="fu">parLapply</span>(data_files, grabMzmlData, <span class="at">grab_what=</span><span class="st">&quot;everything&quot;</span>, <span class="at">cl =</span> cl)</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="fu">library</span>(foreach)</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="fu">library</span>(doParallel)</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a><span class="fu">registerDoParallel</span>(<span class="fu">detectCores</span>()<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>output_data <span class="ot">&lt;-</span> <span class="fu">foreach</span> (<span class="at">i=</span>data_files) <span class="sc">%dopar%</span> {</span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>  RaMS<span class="sc">::</span><span class="fu">grabMzmlData</span>(i, <span class="at">grab_what=</span><span class="st">&quot;everything&quot;</span>)</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a>}</span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a><span class="fu">stopImplicitCluster</span>()</span></code></pre></div>
</div>
<div id="the-nitty-gritty-details" class="section level3">
<h3>The nitty-gritty details</h3>
<p><code>RaMS</code> is possible because mzML and mzXML documents are
fundamentally <a href="https://en.wikipedia.org/wiki/XML">XML</a>-based.
This means that we can leverage speedy and robust XML parsing packages
such as <code>xml2</code> to extract the data. Fundamentally,
<code>RaMS</code> relies on <a href="https://www.w3schools.com/xml/xpath_intro.asp">XPath</a>
navigation to collect various bits of mass-spec data, and the format of
mzML and mzXML files provides the tags necessary. That means a lot of
<code>RaMS</code> code consists of lines like the following:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="do">## Not run:</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>data_nodes <span class="ot">&lt;-</span> xml2<span class="sc">::</span><span class="fu">xml_find_all</span>(mzML_nodes, <span class="at">xpath=</span><span class="st">&quot;//d1:precursorMz&quot;</span>)</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> xml2<span class="sc">::</span><span class="fu">xml_attr</span>(data_nodes, <span class="st">&quot;value&quot;</span>)</span></code></pre></div>
<p>…plus a lot of data handling to get the output into the tidy
format.</p>
<p>The other tricky bit of data extraction is converting the (possibly
compressed) binary data into R-friendly objects. This is usually handled
with code like that shown below. Many of the settings can be deduced
from the file, but sometimes compression types need to be guessed at and
will throw a warning if so.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="do">## Not run:</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>decoded_binary <span class="ot">&lt;-</span> base64enc<span class="sc">::</span><span class="fu">base64decode</span>(binary)</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>raw_binary <span class="ot">&lt;-</span> <span class="fu">as.raw</span>(decoded_binary)</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>decomp_binary <span class="ot">&lt;-</span> <span class="fu">memDecompress</span>(raw_binary, <span class="at">type =</span> file_metadata<span class="sc">$</span>compression)</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>final_binary <span class="ot">&lt;-</span> <span class="fu">readBin</span>(decomp_binary, <span class="at">what =</span> <span class="st">&quot;double&quot;</span>,</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>                        <span class="at">n=</span><span class="fu">length</span>(decomp_binary)<span class="sc">/</span>file_metadata<span class="sc">$</span>mz_precision,</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>                        <span class="at">size =</span> file_metadata<span class="sc">$</span>mz_precision)</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a><span class="co"># See https://github.com/ProteoWizard/pwiz/issues/1301</span></span></code></pre></div>
<p>Fundamentally, mass-spectrometry data is formatted as a <a href="https://en.wikipedia.org/wiki/Jagged_array">ragged array</a>, with
an unknown number of <em>m/z</em> and intensity values for a given scan.
This makes it difficult to encode neatly without interpolating, but tidy
data provides a solution by stacking those arrays rather than aligning
them into some sort of matrix.</p>
<p>This ragged shape is also the reason that subsetting mass-spec data
by retention time is trivial - grab the scans that correspond to the
desired retention times and you’re done. Subsetting by mass, on the
other hand, requires decoding each and every scan’s <em>m/z</em> and
intensity data. If you’re reading a book and only want a couple
chapters, it’s easy to flip to those sections. If you’re looking instead
for every time a specific word shows up, you’ve gotta read the whole
thing.</p>
<p>For more information about the mzML data format and its history,
check out the specification at <a href="https://www.psidev.info/mzML" class="uri">https://www.psidev.info/mzML</a>.</p>
<hr />
<p>Vignette last built on 2023-12-13</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
